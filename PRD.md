# 坦克大战游戏 PRD
## Product Requirements Document

### 📋 项目概述

**项目名称**: 网页坦克大战游戏  
**项目类型**: 2D网页游戏  
**开发平台**: Web浏览器  
**技术栈**: HTML5 + CSS3 + JavaScript (原生)  
**目标用户**: 休闲游戏玩家  

---

## 🎯 产品定位

一款经典的2D坦克大战网页游戏，玩家控制坦克在战场上与AI敌方坦克战斗，通过击败敌人获得分数，挑战个人最高记录。

---

## 🔑 核心功能

### 1. 用户系统
- **用户名输入**: 游戏开始前输入玩家姓名（最长20字符）
- **输入验证**: 非空验证和长度限制
- **玩家标识**: 狮子风格头像显示在坦克上方

### 2. 游戏核心玩法
- **坦克控制**: 
  - 方向键控制坦克移动
  - 鼠标控制炮管方向（炮管始终指向鼠标位置）
  - 空格键或鼠标左键发射子弹
- **战斗系统**: 玩家vs AI敌方坦克
- **生命系统**: 玩家3点生命值，受伤扣1点，死亡游戏结束
- **碰撞机制**: 
  - 玩家与敌方坦克碰撞：玩家扣1血，敌方死亡得50分
  - 子弹击中敌方坦克：敌方死亡得100分

### 3. 地图与障碍物系统
- **随机地图**: 每局随机生成15-25个障碍物
- **障碍物类型**:
  - 🧱 砖墙：棕色，一发摧毁
  - 🛡️ 钢墙：灰色，三发摧毁，有血量显示
  - 🌳 草丛：绿色，可穿过但提供视觉遮挡
- **碰撞检测**: 坦克和子弹与障碍物的物理交互

### 4. AI敌方系统
- **智能行为**: 
  - 追击模式：发现玩家时主动追击
  - 巡逻模式：随机移动寻找玩家
  - 视线检测：考虑障碍物阻挡的line-of-sight算法
- **等级系统**: 1-10级，每消灭2台敌方坦克提升1级
- **难度递增**: 
  - 移动速度：1级最慢，10级最快
  - 射击频率：1级2秒一发，10级0.6秒一发
- **生成机制**: 
  - 最多同时存在5台敌方坦克
  - 每3秒尝试生成新坦克
  - 智能位置选择避免与障碍物重叠

### 5. 积分与排行榜系统
- **分数计算**:
  - 子弹击杀敌方坦克：100分
  - 碰撞击杀敌方坦克：50分
- **排行榜功能**:
  - 显示前10名玩家
  - 使用localStorage持久化存储
  - 玩家姓名智能去重（忽略大小写和空格差异）
  - 每个玩家只保留最高分记录
  - 当前玩家记录高亮显示

---

## 🎨 UI/UX设计

### 1. 游戏界面
- **主画布**: 800x600像素的绿色战场
- **背景**: 网格线提供空间感
- **HUD信息**: 左上角显示生命值、分数、敌军数量、敌军等级

### 2. 用户流程界面
- **欢迎界面**: 狮子主题的玩家姓名输入界面
- **游戏界面**: 实时游戏画面和控制提示
- **游戏结束界面**: 分数总结和操作选项
- **排行榜界面**: TOP 10玩家分数展示

### 3. 视觉设计
- **玩家坦克**: 蓝色方块 + 狮子头像
- **敌方坦克**: 红色方块 + 等级标识
- **子弹**: 玩家金色，敌方红色
- **UI风格**: 现代扁平化设计，深色主题

---

## 🔧 技术规格

### 1. 前端技术
- **HTML5**: 页面结构和Canvas元素
- **CSS3**: 界面样式和动画效果
- **JavaScript**: 游戏逻辑和交互处理
- **Canvas API**: 2D图形渲染

### 2. 游戏引擎架构
- **面向对象设计**: Tank、Bullet、Obstacle类
- **游戏循环**: requestAnimationFrame驱动
- **事件系统**: 键盘输入处理
- **碰撞检测**: 边界框算法
- **AI算法**: 路径寻找和决策树

### 3. 数据存储
- **localStorage**: 排行榜数据持久化
- **JSON格式**: 玩家记录序列化存储

### 4. 性能优化
- **对象池**: 子弹对象重用
- **渲染优化**: 条件渲染和背景缓存
- **内存管理**: 及时清理超界对象

---

## 🎮 操作说明

### 控制方式
- **移动**: ↑↓←→ 方向键
- **炮管方向**: 鼠标指针位置
- **射击**: 空格键或鼠标左键
- **界面**: 鼠标点击按钮

### 游戏流程
1. 输入玩家姓名（最多20字符）
2. 点击"开始游戏"进入战场
3. 控制坦克移动和射击
4. 避免敌方攻击，消灭敌方坦克
5. 生命值耗尽时游戏结束
6. 查看分数和排行榜

---

## 📊 数据指标

### 游戏平衡性参数
- **玩家坦克**: 3点生命值，移动速度3，射击冷却0.5秒
- **敌方坦克**: 1点生命值，速度1.5-4.5（按等级），射击冷却2-0.6秒
- **地图大小**: 800x600像素
- **坦克大小**: 40x40像素
- **子弹大小**: 6x6像素，速度8
- **刷新间隔**: 敌方坦克每3秒尝试生成

### 难度曲线
- **初期**: 1级敌方坦克，速度慢，射击频率低
- **中期**: 随着击杀数增加，敌方等级提升
- **后期**: 10级敌方坦克，快速移动，高频射击

---

## 🚀 运行环境

### 开发环境
- **服务器**: Python3内置HTTP服务器
- **运行命令**: `cd tank-battle-game && python3 -m http.server 8080`
- **访问地址**: http://localhost:8080

### 浏览器兼容性
- **现代浏览器**: Chrome、Firefox、Safari、Edge
- **最低要求**: 支持HTML5 Canvas和ES6语法
- **推荐分辨率**: 1024x768及以上

---

## 🔄 版本迭代历史

### v1.0 - 基础游戏框架
- 基本的坦克移动和射击
- 简单的敌方AI
- 基础碰撞检测

### v2.0 - 障碍物系统
- 三种类型障碍物
- 随机地图生成
- 障碍物碰撞和破坏

### v3.0 - 智能AI系统
- 方向键控制
- 智能追击算法
- 视线检测系统

### v4.0 - 生成优化
- 坦克生成位置优化
- 防止障碍物重叠
- 多区域生成策略

### v5.0 - 血量等级系统
- 玩家3点生命值
- 敌方10级等级系统
- 碰撞伤害机制
- 动态难度调整

### v6.0 - 用户与排行榜系统
- 玩家头像系统（狮子风格）
- 用户名输入验证
- 前10名排行榜
- 智能去重记录管理

### v7.0 - 鼠标控制系统
- 鼠标控制炮管方向
- 鼠标左键射击功能
- 分离车身和炮管控制
- 更直观的射击体验

---

## 🎯 未来规划

### 潜在功能扩展
- **多人模式**: 本地或在线多人对战
- **道具系统**: 血包、护盾、特殊武器
- **关卡模式**: 预设地图和挑战
- **音效系统**: 射击、爆炸、背景音乐
- **更多坦克类型**: 不同属性的载具选择
- **成就系统**: 游戏内成就和解锁内容

### 技术改进
- **移动端适配**: 触摸控制支持
- **性能优化**: WebGL渲染加速
- **网络功能**: 在线排行榜同步
- **数据分析**: 游戏行为统计

---

## 📝 开发规范

### 代码规范
- **变量命名**: 驼峰命名法
- **函数命名**: 动词+名词结构
- **注释**: 中文注释，清晰表达功能
- **代码结构**: 面向对象，模块化设计

### 用户体验原则
- **响应性**: 控制延迟小于50ms
- **可访问性**: 清晰的视觉反馈
- **容错性**: 优雅处理异常情况
- **一致性**: 统一的交互模式

---

*最后更新: 2025-09-27*  
*版本: v7.0*  
*作者: AI Assistant*